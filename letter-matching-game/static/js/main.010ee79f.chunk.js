(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{128:function(e,t,a){e.exports={header:"Header_header__1PS8I"}},129:function(e,t,a){e.exports={body:"Body_body__2OfF-"}},135:function(e,t,a){e.exports={table:"Statistics_table__ed1VP"}},140:function(e,t,a){e.exports=a(272)},149:function(e,t,a){},211:function(e,t,a){},272:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(3),c=a.n(i),l=a(19),o=(a(149),a(29)),s=a(126),u=a(50),d=a(9),m={won:0,lost:0,bestTime:{easy:"--:--",normal:"--:--",hard:"--:--"}},p=function(e){return function(t){t({type:"statistic/SET_STATISTIC",statistics:e})}},h={timer:""},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t){t({type:"timer/SET_TIMER",timer:e})}},v=a(56),g=a(97),b=a.n(g),E=a(127),y=a.n(E),C={easy:{value:"easy",label:"Easy",cols:4,rows:4,time:2},normal:{value:"normal",label:"Normal",cols:4,rows:4,time:1},hard:{value:"hard",label:"Hard",cols:6,rows:6,time:2}},O="letter_matching_statistics";function T(){var e=localStorage.getItem(O);if(e&&"string"===typeof e)try{return JSON.parse(e)}catch(t){return console.log(t),!1}return{won:0,lost:0,bestTime:{easy:"--:--",normal:"--:--",hard:"--:--"}}}function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=T();return e.forEach(function(e){var a=e.path,n=e.value;a&&y()(t,a,n)}),localStorage.setItem(O,JSON.stringify(t)),t}var S=function(e,t){C[e]&&t&&t(function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cols*e.rows/2,a=[],n=0;n<t;n++){var r=String.fromCharCode(65+Math.floor(26*Math.random()));a.push(r)}return b()([].concat(a,Object(v.a)(b()(a))))}(C[e]))},_=function(e,t){var a,n=e.grid,r=e.visibledCards,i=e.eliminatedCards,c=function(e,t){switch(e.length){case 0:return[t];case 1:return[].concat(Object(v.a)(e),[t]);default:return[]}}(r,t),l=i;2===c.length&&(n[c[0]]===n[t]?(a=!0,l=[].concat(Object(v.a)(l),Object(v.a)(c))):a=!1);return{isMatch:a,visibledCards:c,eliminatedCards:l}},k=function(e,t,a){return!(!e.length||!a.length||e.length!==a.length||0!==t.length)},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(e){var t=e.split(":");return 1*t[0]*60+1*t[1]}return!1},I=function(e){var t=function(e,t){return("000"+e).slice(-1*t)},a=parseFloat(e).toFixed(3),n=Math.floor(a/60)%60,r=Math.floor(a-60*n);return t(n,2)+":"+t(r,2)},G={level:"",grid:[],isPlaying:!1,visibledCards:[],eliminatedCards:[]},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t){t({type:"game/SET_LEVEL",level:e})}},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(t){t({type:"game/INITIALIZE_GRID",grid:e})}},N=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(t){t({type:"game/SET_PLAYING",value:e})}},x=function(e){return function(t,a){var n=a().game,r=_(n,e),i=r.isMatch,c=r.visibledCards,l=r.eliminatedCards;t({type:"game/SET_VISIBLE_CARD",nextState:{visibledCards:c}}),void 0!==i&&setTimeout(function(){var e=i?"game/MATCHING_SUCCESS":"game/MATCHING_FAILURE",a=i?{eliminatedCards:l}:{};t(Object(d.a)({type:e},a))},1e3)}},L=function(){return function(e){e({type:"game/RESTART_GAME"})}},P=function(){return function(e){e({type:"game/RESET_GAME"})}},R=Object(o.c)({statistic:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"statistic/SET_STATISTIC":return Object(d.a)({},t.statistics);case"statistic/SET_STATISTIC_WON_LOST":return Object(d.a)({},e,Object(u.a)({},t.field,t.count));case"statistic/SET_STATISTIC_BEST_TIME":return Object(d.a)({},e,{bestTime:Object(d.a)({},e.bestTime,Object(u.a)({},t.level,t.time))});default:return e}},timer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"timer/SET_TIMER":return Object(d.a)({},e,{timer:t.timer});default:return e}},game:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"game/SET_LEVEL":return Object(d.a)({},e,{level:t.level});case"game/INITIALIZE_GRID":return Object(d.a)({},e,{grid:t.grid});case"game/SET_PLAYING":return Object(d.a)({},e,{isPlaying:t.value});case"game/SET_VISIBLE_CARD":return Object(d.a)({},e,t.nextState);case"game/MATCHING_SUCCESS":return Object(d.a)({},e,{visibledCards:[],eliminatedCards:t.eliminatedCards});case"game/MATCHING_FAILURE":return Object(d.a)({},e,{visibledCards:[]});case"game/RESTART_GAME":return Object(d.a)({},e,{grid:[],isPlaying:!1,visibledCards:[],eliminatedCards:[]});case"game/RESET_GAME":return Object(d.a)({},G);default:return e}}}),V=[s.a],B=o.d.apply(void 0,[o.a.apply(void 0,V)].concat([])),D=Object(o.e)(R,{},B),F=(a(210),a(211),a(128)),U=a.n(F),H=function(e){var t=e.children;return r.a.createElement("header",{className:U.a.header},t)},W=a(129),J=a.n(W),Y=function(e){var t=e.children;return r.a.createElement("section",{className:J.a.body},t)},Z=a(11),Q=a(12),$=a(16),q=a(13),z=a(17),K=a(273),X=a(53),ee=a(94),te=a.n(ee),ae=K.a.Option,ne=function(e){function t(){var e,a;Object(Z.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object($.a)(this,(e=Object(q.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){(0,a.props.dispatch)(A(e))},a.handleStart=function(){var e=a.props,t=e.level,n=e.dispatch;S(t,function(e){return n(M(e))})},a}return Object(z.a)(t,e),Object(Q.a)(t,[{key:"render",value:function(){var e=this.props,t=e.level,a=e.grid,i=e.isPlaying,c=te()(C),l=a.length>0||i;return r.a.createElement(n.Fragment,null,r.a.createElement(K.a,{value:t,dropdownMatchSelectWidth:!1,disabled:l,onChange:this.handleChange},r.a.createElement(ae,{value:""},"Select level"),c.map(function(e){return r.a.createElement(ae,{key:e.value,value:e.value},e.label)})),r.a.createElement(X.a,{type:"primary",className:"margin-left",disabled:!t||l,onClick:this.handleStart},"Start"))}}]),t}(n.PureComponent),re=Object(l.b)(function(e){return e.game})(ne),ie=a(275),ce=a(276),le=a(135),oe=a.n(le),se=function(e){var t=e.won,a=e.lost,n=e.bestTime;return r.a.createElement("div",null,r.a.createElement(ie.a,{gutter:16},r.a.createElement(ce.a,{span:2},"Won:"),r.a.createElement(ce.a,{span:4},t)),r.a.createElement(ie.a,{gutter:16},r.a.createElement(ce.a,{span:2},"Lost:"),r.a.createElement(ce.a,{span:4},a)),r.a.createElement(ie.a,{gutter:16,className:"margin-top"},r.a.createElement(ce.a,{span:2},"Best time:"),r.a.createElement(ce.a,{span:4},r.a.createElement("table",{className:oe.a.table},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Easy"),r.a.createElement("th",null,"Normal"),r.a.createElement("th",null,"Hard"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,n.easy),r.a.createElement("td",null,n.normal),r.a.createElement("td",null,n.hard)))))))},ue=function(e){function t(){return Object(Z.a)(this,t),Object($.a)(this,Object(q.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(Q.a)(t,[{key:"componentDidMount",value:function(){var e=T();"object"===typeof e&&(0,this.props.dispatch)(p(e))}},{key:"render",value:function(){return r.a.createElement(se,this.props)}}]),t}(n.PureComponent),de=Object(l.b)(function(e){return e.statistic})(ue),me=a(274),pe=a(10),he=a(136),fe=a.n(he),ve=function(e){function t(){var e,a;Object(Z.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object($.a)(this,(e=Object(q.a)(t)).call.apply(e,[this].concat(r)))).startTimer=function(){if(a.timer){var e=a.props.startValue;a.timer.start({countdown:!0,startValues:{seconds:e}}),a.timer.addEventListener("secondsUpdated",function(){var e=a.props,t=e.onChange,n=e.checkTimerExpired,r=e.checkGameCompleted,i=a.timer.getTimeValues().toString(["minutes","seconds"]);t&&t(i),!0===r()?a.stopTimer():n(i)})}},a.stopTimer=function(){a.timer&&(a.timer.stop(),a.timer.removeEventListener("secondsUpdated"))},a}return Object(z.a)(t,e),Object(Q.a)(t,[{key:"componentDidMount",value:function(){this.timer=new fe.a,this.startTimer(),this.props.startGame()}},{key:"componentWillUnmount",value:function(){this.stopTimer()}},{key:"render",value:function(){var e=this.props.value;return r.a.createElement(n.Fragment,null,r.a.createElement(pe.a,{type:"clock-circle"})," Time remaining: ",e||"Loading...")}}]),t}(n.PureComponent),ge=function(e){function t(){var e,a;Object(Z.a)(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(a=Object($.a)(this,(e=Object(q.a)(t)).call.apply(e,[this].concat(i)))).getStartValue=function(){var e=a.props.level;return 60*C[e].time},a.startGame=function(){(0,a.props.dispatch)(N())},a.restartGame=function(){var e=a.props,t=e.level,n=e.dispatch;a.startGame(),S(t,function(e){return n(M(e))})},a.stopGame=function(){var e=a.props.dispatch;e(f("")),e(L())},a.resetGame=function(){(0,a.props.dispatch)(P())},a.setStatistics=function(){var e=a.props,t=e.lost,n=e.dispatch,r=j([{path:"lost",value:t+1}]);n(p(r))},a.showFailureModal=function(){me.a.confirm({title:"Oops!!!",content:"You just ran out of time. Better luck next time.",okText:"Try again",cancelText:"Too hard? Try different level",icon:r.a.createElement(pe.a,{type:"close-circle",style:{color:"red"}}),onOk:function(){a.restartGame()},onCancel:function(){a.resetGame()}})},a.checkTimerExpired=function(e){a.props.isPlaying&&"00:00"===e&&(a.stopGame(),a.setStatistics(),a.showFailureModal())},a.checkGameCompleted=function(){var e=a.props,t=e.grid,n=e.visibledCards,r=e.eliminatedCards;return k(t,n,r)},a.handleChange=function(e){(0,a.props.dispatch)(f(e))},a}return Object(z.a)(t,e),Object(Q.a)(t,[{key:"render",value:function(){var e=this.props,t=e.grid,a=e.timer;return t.length>0?r.a.createElement(ve,{value:a,startValue:this.getStartValue(),startGame:this.startGame,onChange:this.handleChange,checkTimerExpired:this.checkTimerExpired,checkGameCompleted:this.checkGameCompleted}):null}}]),t}(n.PureComponent),be=Object(l.b)(function(e){return Object(d.a)({},e.game,e.timer,e.statistic)})(ge),Ee=a(75),ye=a.n(Ee),Ce=function(e){function t(){var e,a;Object(Z.a)(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(a=Object($.a)(this,(e=Object(q.a)(t)).call.apply(e,[this].concat(i)))).handleCardClick=function(e,t,n){var r=a.props,i=r.visibledCards,c=r.onCardClick;return!e&&!t&&i.length<2?c(n):null},a.renderCardByState=function(e,t,n){var i=a.props,c=i.visibledCards,l=i.eliminatedCards,o=c.indexOf(n)>-1,s=l.indexOf(n)>-1;return r.a.createElement(ce.a,{key:t+n,span:e},r.a.createElement("div",{className:"".concat(ye.a.card," ").concat(s?ye.a.hidden:""),onClick:function(){return a.handleCardClick(o,s,n)}},o&&t))},a}return Object(z.a)(t,e),Object(Q.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.level,n=t.grid,i=C[a],c=24/Math.round(n.length/i.cols);return r.a.createElement("div",{className:ye.a.desk},r.a.createElement(ie.a,{gutter:2,type:"flex"},n.map(function(t,a){return e.renderCardByState(c,t,a)})))}}]),t}(n.PureComponent),Oe=function(e){function t(){var e,a;Object(Z.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object($.a)(this,(e=Object(q.a)(t)).call.apply(e,[this].concat(r)))).handleCardClick=function(e){(0,a.props.dispatch)(x(e))},a}return Object(z.a)(t,e),Object(Q.a)(t,[{key:"render",value:function(){return this.props.isPlaying?r.a.createElement(Ce,Object.assign({},this.props,{onCardClick:this.handleCardClick})):null}}]),t}(n.PureComponent),Te=Object(l.b)(function(e){return e.game})(Oe),je=function(e){function t(){var e,a;Object(Z.a)(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(a=Object($.a)(this,(e=Object(q.a)(t)).call.apply(e,[this].concat(i)))).startGame=function(){(0,a.props.dispatch)(N())},a.restartGame=function(){var e=a.props,t=e.level,n=e.dispatch;a.startGame(),S(t,function(e){return n(M(e))})},a.stopGame=function(){(0,a.props.dispatch)(L())},a.newGame=function(){var e=a.props.dispatch;e(f("")),e(P())},a.setStatistics=function(){var e=a.props,t=e.level,n=e.timer,r=e.won,i=e.dispatch,c=60*C[t].time-w(n),l=j([{path:"won",value:r+1},{path:"bestTime.".concat(t),value:I(c)}]);i(p(l))},a.showCompleteModal=function(){me.a.confirm({title:"Congratulations!!!",content:"Your memory is still useful.",okText:"Try again",cancelText:"Too easy? Try different level",icon:r.a.createElement(pe.a,{type:"check-circle",style:{color:"green"}}),onOk:function(){return a.restartGame()},onCancel:function(){return a.newGame()}})},a}return Object(z.a)(t,e),Object(Q.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.grid,n=t.visibledCards,r=t.eliminatedCards;!0===k(a,n,r)&&(this.stopGame(),this.setStatistics(),this.showCompleteModal())}},{key:"render",value:function(){return null}}]),t}(n.PureComponent),Se=Object(l.b)(function(e){return Object(d.a)({},e.game,e.timer,e.statistic)})(je);var _e=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(H,null,r.a.createElement(re,null),r.a.createElement("div",{className:"margin-top"},r.a.createElement(de,null))),r.a.createElement(Y,null,r.a.createElement(be,null),r.a.createElement("div",{className:"margin-top"},r.a.createElement(Te,null),r.a.createElement(Se,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(l.a,{store:D},r.a.createElement(_e,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},75:function(e,t,a){e.exports={card:"Desk_card__2u5gQ",hidden:"Desk_hidden__2DxEg"}}},[[140,1,2]]]);
//# sourceMappingURL=main.010ee79f.chunk.js.map